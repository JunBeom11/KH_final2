<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kh.moyoung.board.model.mapper.MovieMapper">
	<sql id="movieListSql">
		SELECT   
			MOVIE_ID,
			LAST_UPDATE,
			TITLE,
			TITLE_KOR,
			PRODUCT_YEAR,
			OPEN_DATE,
			COUNTRY,
			GENRE,
			DIRECTOR,
			VOTE,
			ADULT,
			RUN_TIME,
			M_POSTER,
			NETFLIX,
			WATCHA,
			TVING,
			WAVVE,
			STORY,
			ACTOR
		FROM MOVIE
	</sql>
	
	<resultMap type="Movie" id="movieListResultMap">
		<id property="movie_id" column="MOVIE_ID"/>
		<result property="last_update" column="LAST_UPDATE"/>
		<result property="title" column="TITLE"/>
		<result property="title_kor" column="TITLE_KOR"/>
		<result property="product_year" column="PRODUCT_YEAR"/>
		<result property="open_file" column="OPEN_DATE"/>
		<result property="country" column="COUNTRY"/>
		<result property="genre" column="GENRE"/>
		<result property="director" column="DIRECTOR"/>
		<result property="vote" column="VOTE"/>
		<result property="adult" column="ADULT"/>
		<result property="run_time" column="RUN_TIME"/>
		<result property="m_poster" column="M_POSTER"/>
		<result property="netflix" column="NETFLIX"/>
		<result property="watcha" column="WATCHA"/>
		<result property="tving" column="TVING"/>
		<result property="wavve" column="WAVVE"/>
		<result property="story" column="STORY"/>
		<result property="actor" column="ACTOR"/>
	</resultMap>

	<select id="selectMovieList" resultMap="movieListResultMap">
		<include refid="movieListSql"/>
		ORDER BY MOVIE_ID DESC
	</select>
	
	<select id="selectMovieCount" resultType="_int">
		SELECT COUNT(*)
		FROM MOVIE
	</select>
	
	<select id="selectMember" parameterType="string" resultMap="memberResultMap">
 		<include refid="selectMemberSql" />
		WHERE MOVIE_ID = #{movie_id} 
 	</select>
 	
	
</mapper>